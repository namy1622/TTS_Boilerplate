"use strict";(function(n){function r(){var r,f,s,u,a,o;if(t.valid()){r=new FormData(t[0]);f=parseInt(n('select[name="CategoryIdss"]').val());console.log("--cateId",f);console.log("-- select category _begin_2:",n("#categorySelect").val());s=parseInt(n("#categorySelect").val());console.log("--Selected category_update: ",s);r.append("CategoryId",f);console.log("formData to send:");var e=!0,h=!1,c=undefined;try{for(u=r.entries()[Symbol.iterator]();!(e=(a=u.next()).done);e=!0)o=a.value,console.log(o[0]+": "+o[1])}catch(v){h=!0;c=v}finally{try{!e&&u["return"]&&u["return"]()}finally{if(h)throw c;}}abp.ui.setBusy(i);n.ajax({url:abp.appPath+"Products_table/Update",type:"POST",data:r,contentType:!1,processData:!1,success:function(n){console.log("success",n);i.modal("hide");t[0].reset();abp.notify.info(l("Cập nhật thành công!"));abp.event.trigger("product.edited",r)},error:function(n){console.error("Error details:",n);console.log("Status:",n.status);console.log("Response:",n.responseText);abp.notify.error(n.responseJSON&&n.responseJSON.message?n.responseJSON.message:"An error occurred")},complete:function(){abp.ui.clearBusy(i)}})}}var i=n("#ProductEditModal"),t=i.find("form");_productService=abp.services.app.product_table;l=abp.localization.getSource("TTS_boilerplate");console.log("da vao editproduct");console.log("edit_1",_productService);t.closest("div.modal-content").find(".save-button").click(function(n){n.preventDefault();r()});t.find("input").on("keypress",function(n){n.which==13&&(n.preventDefault(),r())});i.on("shown.bs.modal",function(){t.find("input[type=text]:first").focus()});n("#ProductEditForm #imgProduct").on("change",function(){var t=new FileReader;t.onload=function(t){n("#ProductEditForm #imagePreview").attr("src",t.target.result).show()};t.readAsDataURL(this.files[0])});n("#ProductEditForm").on("hidden.bs.modal",function(){n("#ProductEditForm #imagePreview").attr("src","#").hide();n("#ProductEditForm #imgProduct").val("")});t.validate({rules:{NameProduct:{required:!0,maxlength:64},Price:{required:!0,number:!0},DecriptionProduct:{required:!0,maxlength:256},CreationDate:{required:!0},ExpirationDate:{required:!0},NameCategory:{required:!0}},messages:{NameProduct:{required:"Bạn phải nhập tên sản phẩm!",maxlength:"Tên sản phẩm không quá 64 ký tự!"},Price:{required:"Bạn phải nhập giá của sản phẩm!",number:"Giá sản phẩm phải là số!"},DecriptionProduct:{required:"Hãy nhập mô tả của sản phẩm!",maxlength:"Mô tả không quá 256 kí tự!"},CreationDate:{required:"Bạn hãy nhập ngày sản xuất!"},ExpirationDate:{required:"Bạn hãy nhập ngày hết hạn!"},NameCategory:{required:"Hãy chọn Loại sản phẩm!"}}})})(jQuery);